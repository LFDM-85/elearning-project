"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[577],{8577:function(e,n,s){s.r(n),s.d(n,{SignPage:function(){return T}});var a=s(4165),r=s(5861),o=s(1413),t=s(9439),i=s(2791),l=s(6151),d=s(4708),c=s(7391),u=s(533),m=s(5527),h=s(8870),p=s(1889),g=s(890),f=s(7909),w=s(7689),Z=s(2888),x=s(9195),v=s(3466),P=s(3400),j=s(5523),k=s(4454),b=s(4440),C=s(4070),I=s(9569),S=s(3710),y=s(184);function T(){var e=(0,w.s0)(),n=(0,x.cI)({defaultValues:{name:"",email:"",password:"",confirmPassword:""}}),s=n.register,T=n.handleSubmit,q=n.formState.errors,L=(0,i.useState)(!0),A=(0,t.Z)(L,2),U=A[0],W=A[1],D=(0,i.useState)({showPassword:!1,showConfirmPassword:!1}),E=(0,t.Z)(D,2),N=E[0],R=E[1],V=(0,i.useState)(!1),z=(0,t.Z)(V,2),F=z[0],H=z[1],O=(0,i.useState)(!1),Y=(0,t.Z)(O,2),$=Y[0],_=Y[1],B=(0,i.useState)(!1),G=(0,t.Z)(B,2),J=G[0],K=G[1],M=(0,i.useState)(!1),Q=(0,t.Z)(M,2),X=Q[0],ee=Q[1],ne=(0,i.useState)(""),se=(0,t.Z)(ne,2),ae=se[0],re=se[1],oe=(0,i.useState)("info"),te=(0,t.Z)(oe,2),ie=te[0],le=te[1],de=(0,Z.Z)(),ce=function(e,n){"clickaway"!==n&&ee(!1)},ue=function(e,n){re(e),le(n),ee(!0)};(0,i.useEffect)((function(){$&&K(!F)}),[$]);var me=U?"auth/signin":"auth/signup",he=function(){var n=(0,r.Z)((0,a.Z)().mark((function n(s){var r,t,i,l,d,c;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=s.name,t=s.email,i=s.password,l=s.confirmPassword,d={name:r,email:t,password:i,confirmPassword:l},c=["professor"],U||(d.password===d.confirmPassword?(H(!1),f.Z.post(me,(0,o.Z)((0,o.Z)({},d),{},{roles:c,isValidated:!1})).then((function(n){if(201===n.status)return ue("User was created! Please Sign In","success"),console.log("User created"),e("/sign",{replace:!0}),void W(!0)})).catch((function(n){ue("Email already exists!","error"),e("/sign",{replace:!0}),console.log(n.message)}))):(H(!0),ue("The inputed passwords are different! Try again","error"))),U&&f.Z.post(me,d,{headers:{"Content-Type":"application/json"},withCredentials:!0}).then((function(n){var s=n.data.tokens.accessToken;localStorage.setItem("accessToken",n.data.tokens.accessToken),localStorage.setItem("refreshToken",n.data.tokens.refreshToken),de.signin(s,n.data.user),de.isSignedIn=!0,console.log("User logged In"),e("/my",{replace:!0})})).catch((function(e){ue("User not found!","error"),console.log(e.message)}));case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,y.jsxs)(p.ZP,{container:!0,component:"main",sx:{height:"100vh"},children:[(0,y.jsx)(d.ZP,{}),(0,y.jsx)(h.Z,{sx:{position:"absolute",width:"100%",height:"100%",backgroundImage:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",backgroundRepeat:"no-repeat",backgroundColor:function(e){return"light"===e.palette.mode?e.palette.grey[50]:e.palette.grey[900]},backgroundSize:"cover",backgroundPosition:"center",opacity:.8}}),(0,y.jsx)(p.ZP,{item:!0,xs:12,sm:8,md:5,component:m.Z,elevation:6,square:!0,sx:{height:"auto",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:1,margin:"auto",padding:4,borderRadius:2},children:(0,y.jsxs)(h.Z,{sx:{my:4,mx:2,display:"flex",flexDirection:"column",alignItems:"center",width:"100%",maxWidth:400},children:[(0,y.jsxs)(g.Z,{component:"h1",variant:"h5",sx:{mb:2},children:[" ",U?"Sign In":"Sign Up - Professors Only"]}),(0,y.jsxs)(h.Z,{component:"form",noValidate:!0,onSubmit:T(he),sx:{mt:1,width:"100%"},children:[!U&&(0,y.jsx)(c.Z,(0,o.Z)((0,o.Z)({margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Your Name"},s("name",{required:"Name is required!",minLength:{value:3,message:"Invalid name, must have between 3 to 25 characters"},maxLength:{value:25,message:"Invalid name, must have less then 25 characters"}})),{},{autoComplete:"name",autoFocus:!0,error:!(null===q||void 0===q||!q.name),helperText:null!==q&&void 0!==q&&q.name?q.name.message:null,inputProps:{maxLength:25}})),(0,y.jsx)(c.Z,(0,o.Z)((0,o.Z)({margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address"},s("email",{required:"Email is required!",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}})),{},{autoComplete:"email",autoFocus:!0,error:!(null===q||void 0===q||!q.email),helperText:null!==q&&void 0!==q&&q.email?q.email.message:null})),(0,y.jsx)(c.Z,(0,o.Z)((0,o.Z)({margin:"normal",required:!0,fullWidth:!0},s("password",{required:"Password is required!",minLength:{value:8,message:"Invalid password, must have between 8 to 25 characters"},maxLength:{value:25,message:"Invalid password, must have less then 25 characters"}})),{},{label:"Password",type:N.showPassword?"text":"password",id:"password",autoComplete:"current-password",error:!(null===q||void 0===q||!q.password),helperText:null!==q&&void 0!==q&&q.password?q.password.message:null,inputProps:{maxLength:25},InputProps:{endAdornment:(0,y.jsx)(v.Z,{position:"end",children:(0,y.jsx)(P.Z,{onClick:function(){R((0,o.Z)((0,o.Z)({},N),{},{showPassword:!N.showPassword}))},"aria-label":"toggle password",edge:"end",children:N.showPassword?(0,y.jsx)(I.Z,{}):(0,y.jsx)(S.Z,{})})})}})),!U&&(0,y.jsx)(c.Z,(0,o.Z)((0,o.Z)({margin:"normal",required:!0,fullWidth:!0},s("confirmPassword",{required:"Confirm password is required!",minLength:{value:8,message:"Invalid password, must have between 8 to 25 characters"},maxLength:{value:25,message:"Invalid password, must have less then 25 characters"}})),{},{label:"Confirm Password",type:N.showConfirmPassword?"text":"password",id:"confirmPassword",autoComplete:"confirm-password",error:!(null===q||void 0===q||!q.confirmPassword),helperText:!J&&F?null:"Passwords do not match",inputProps:{maxLength:25},onChange:function(){_(!0)},InputProps:{endAdornment:(0,y.jsx)(v.Z,{position:"end",children:(0,y.jsx)(P.Z,{onClick:function(){R((0,o.Z)((0,o.Z)({},N),{},{showConfirmPassword:!N.showConfirmPassword}))},"aria-label":"toggle password",edge:"end",children:N.showConfirmPassword?(0,y.jsx)(I.Z,{}):(0,y.jsx)(S.Z,{})})})}})),U&&(0,y.jsx)(j.Z,{control:(0,y.jsx)(k.Z,{value:"remember",color:"primary"}),label:"Remember me"}),(0,y.jsx)(l.Z,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",sx:{mt:3,mb:2},children:U?"Sign In":"Sign Up"}),U&&(0,y.jsx)(l.Z,{onClick:function(){f.Z.post("auth/signin",{name:"admin",email:"admin@admin.com",password:"qwertyuiop"},{headers:{"Content-Type":"application/json"},withCredentials:!0}).then((function(n){var s=n.data.tokens.accessToken;localStorage.setItem("accessToken",n.data.tokens.accessToken),localStorage.setItem("refreshToken",n.data.tokens.refreshToken),de.signin(s,n.data.user),console.log("User logged In"),e("/my",{replace:!0})})).catch((function(e){ue("Admin user not found!","error"),console.log(e.message)}))},fullWidth:!0,variant:"contained",color:"secondary",sx:{mt:1,mb:2},children:"Admin Demonstration Sign IN"}),(0,y.jsx)(p.ZP,{container:!0,children:(0,y.jsx)(p.ZP,{item:!0,children:(0,y.jsx)(u.Z,{variant:"body2",onClick:function(){W((function(e){return!e}))},children:U?"Dont have an account? Sign Up":"Have an account? Sign In"})})})]})]})}),(0,y.jsx)(b.Z,{open:X,autoHideDuration:6e3,onClose:ce,children:(0,y.jsx)(C.Z,{onClose:ce,severity:ie,sx:{width:"100%"},children:ae})})]})}}}]);
//# sourceMappingURL=577.fd039cf6.chunk.js.map